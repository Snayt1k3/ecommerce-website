{%extends 'shop/base.html'%}
{% load static%}

{%block head%}
<title>Корзина</title>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"
      rel="stylesheet"/>
<link href="{% static 'css/cart.css' %}" rel="stylesheet">
{%endblock%}


{% block content%}
{% if not user_cart%}
<div class="text-center">
    <br>
    <h1 class="text-center cart-title">
        Ваша Корзина Пуста
    </h1>
    <a href="{% url 'home' %}">
        <button class="btn btn-primary btn-lg btn-block mt-5" type="button">Назад к товарам</button>
    </a>
</div>
{% else %}
<div style="height:100px;">
    <div class="text-center">
        <p class="fs-2 fw-bold mt-3 cart-title">Корзина</p>
    </div>
</div>
<div class="row mx-auto main-div">
    <div class="col-12 col-sm-12 col-md-12 col-lg-6 text-center">
        <table class="table table-hover cart-table">
            <thead class="cart-thead">
            <tr>
                <th colspan="4">
                    Ваши Товары
                </th>
            </tr>
            </thead>
            {% for item in user_cart%}
            <tr>
                <td>
                    <a href="{{item.product.get_url}}">
                        <img alt="" height="150" src="{{item.product.img}}"
                             width="100">
                    </a>
                </td>

                <td class="text-start">
                    <input type="hidden" name="_token" value="{{ csrf_token }}">
                    <input type="hidden" value="{{item.product.id}}" class="prod_id">
                    {{item.product.name}}
                    <br>
                    Цена: {{item.product.price}}₽
                    <br>
                    Кол-во: {{item.quantity}} x {{item.product.price}}₽
                    <br>
                    id: {{item.product.id}}
                </td>

                <td class="text-start">
                    Итого:
                    <br>
                    {{item.sub_total}}₽
                </td>

                {%if item.quantity < item.product.stock%}

                <td>
                    <div class="btns-cart">
                        <button class="btn btn-success btn-sm rounded-5" onclick="plus_quantity({{item.product.id}})">
                            <span class="material-symbols-outlined text-white cart-plus">add_circle</span>
                        </button>
                        <button class="btn btn-danger btn-sm rounded-5" onclick="minus_quantity({{item.product.id}})">
                            <span class="material-symbols-outlined text-white cart-minus">do_not_disturb_on</span>
                        </button>
                        <button class="btn btn-secondary btn-sm rounded-5"
                                onclick="delele_from_cart({{item.product.id}})">
                            <span class="material-symbols-outlined text-white cart-delete">delete</span>
                        </button>
                    </div>
                </td>

                {%else%}

                <td>
                    <div class="btns-cart">
                        <button class="btn btn-secondary btn-sm rounded-5">
                            <span class="material-symbols-outlined text-white cart-plus">add_circle</span>
                        </button>
                        <button class="btn btn-danger btn-sm rounded-5">
                            <span class="material-symbols-outlined text-white cart-minus"
                                  onclick="minus_quantity({{item.product.id}})">do_not_disturb_on</span>
                        </button>
                        <button class="btn btn-secondary btn-sm rounded-5">
                            <span class="material-symbols-outlined text-white cart-delete"
                                  onclick="delele_from_cart({{item.product.id}})">delete</span>
                        </button>
                    </div>
                    {%endif%}
                </td>
            </tr>
            {%endfor%}
        </table>
    </div>
    <div class="col-12 col-sm-12 col-md-12 col-lg-6 text-center">
        <table class="table cart-table">
            <thead class="cart-thead">
            <tr>
                <th colspan="4">
                    Оплата
                </th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>
                    Проверьте корзину перед оплатой
                </td>
            </tr>
            <tr class="text">
                <td>
                    Сумма всех товаров: <strong>{{total}}₽</strong>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="col">
                <a href="{% url 'home'%}">
                    <button class="btn btn-primary btn-lg btn-block" type="button">Назад к товарам</button>
                </a>
            </div>
            <div class="col">
                <a href="#">
                    <button class="btn btn-primary btn-lg btn-block" type="button">К оплате</button>
                </a>
            </div>
        </div>
    </div>
</div>
{%endif%}
<div class="need_to_footer">
</div>
{%endblock%}